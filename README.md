## 💤 Shhh! (쉿!)  
원룸·고시원 소음·안전 모니터링 시스템  

> **프로젝트 기간:** 2025.11.20 ~ 2025.12.05  
> **프로젝트 주제:** “소음과 안전을 동시에 잡는 원룸/고시원 관리 IoT 시스템”  

---

## 👥 팀 구성 및 역할

| 이름 | 역할 | 주요 기여 |
|------|------|-----------|
| **김기환 (팀장)** | 시스템 설계 & 펌웨어 개발 | <ul><li>프로젝트 전체 구조 설계 및 통신 프로토콜 기획</li><li>아두이노 기반 **사운드·진동·가스·불꽃 센서 데이터 수집 및 제어 펌웨어 개발**</li><li>Bluetooth·Wi-Fi 통신 및 라즈베리파이 연동</li><li>LCD 출력 및 경고 로직 구현</li><li>GitHub 문서화 및 발표 자료 제작</li></ul> |
| **김동현 (팀원)** | 관리자용 STM32 설계 및 테스트 | <ul><li>센서·부저·팬 배선 및 하드웨어 조립</li><li>LCD·팬·부저 구동 테스트</li><li>Wi-Fi 및 Bluetooth 모듈 설정</li><li>관리자용 STM32 펌웨어 제작 및 시리얼 통신 테스트</li></ul> |

---

## 📖 프로젝트 개요

“Shhh(쉿!)” 시스템은 원룸이나 고시원 등 **공유 주거 공간의 소음, 진동, 화재, 유해가스 등을 감지**하고  
**집주인(관리자)이 실시간으로 확인 및 경고를 보낼 수 있도록 설계된 IoT 환경 모니터링 시스템**입니다.

---

## 🚨 문제 인식 및 개발 배경

- **옆방의 소음, 진동 등으로 수면 방해를 받는 문제**  
- 직접 항의하기 어려운 환경 → **관리자 중재 의존**  
- **불꽃, 가스 누출 등 안전사고의 조기 감지 어려움**  
- 관리자가 여러 방의 상태를 **한눈에 모니터링할 수 있는 시스템의 필요성**  

> 💡 이를 해결하기 위해, **소음과 안전 상태를 자동 감지 및 경고하는 시스템**을 구현하였습니다.

---

## 🧠 핵심 아이디어

- **Arduino Uno**에서 사운드, 진동, 불꽃, 유해가스 감지  
- 임계값 초과 시 LCD에 경고 메시지 출력, 부저/팬 작동  
- **Bluetooth**를 통해 “조용히 해주세요” 자동 송신  
- **Wi-Fi(ESP8266)**로 라즈베리파이에 데이터 업로드 및 DB 저장  
- **STM32F411RE**는 관리자 측 장치로, 수집된 경고를 시각화 및 모니터링  

---

## 🔧 사용 부품

| 구분 | 부품명 | 기능 |
|------|--------|------|
| MCU | **Arduino UNO** | 센서 데이터 수집 및 제어, LCD·부저·팬 구동 |
| MCU | **STM32F411RE (Nucleo)** | 관리자 모니터링, Bluetooth 수신 및 표시 |
| 센서 | 사운드 센서 (TS0223/KY-037) | 소음 감지 (ADC) |
| 센서 | 진동 센서 (SW-420) | 진동 감지 |
| 센서 | 불꽃 감지 센서 (YF-S201) | 화재 감지 |
| 센서 | 유해가스 센서 (MQ-2) | 가스 감지 |
| 모듈 | HC-06 | Bluetooth 통신 |
| 모듈 | ESP8266 (ESP-01) | Wi-Fi 업로드 |
| 출력장치 | I2C LCD | 상태 표시 |
| 출력장치 | 부저 / EZ 팬 | 경고음, 환기 |
| 서버 | Raspberry Pi 4 | DB 저장 및 웹 시각화 |

---

## 🧱 시스템 구성도

<p align="center">
  <img src="doc/images/system.png" width="49%" />
  <img src="doc/images/system2.png" width="49%" />
</p>

---

## 📊 통신 구조

| 구간 | 방식 | 프로토콜 | 데이터 포맷 |
|------|------|-----------|-------------|
| Arduino ↔ STM32 | UART (115200 bps) | JSON | `{"sound":420,"vib":1,"gas":2100,"flame":0}` |
| Arduino ↔ 휴대폰 | Bluetooth (HC-06) | SPP | `"조용히 해주세요"` |
| Arduino ↔ Raspberry Pi | Wi-Fi (ESP8266) | MQTT / HTTP | JSON 포맷 |

---

## 💡 주요 기능

### 1️⃣ 센서 데이터 수집 및 제어 (Arduino)
- 소리, 진동, 불꽃, 유해가스 실시간 감지  
- 일정 임계치 초과 시 LCD에 경고 문구 출력  
- 부저 ON / 팬 ON으로 자동 대응  
- Bluetooth 메시지 송신 및 Wi-Fi 데이터 전송  

### 2️⃣ 관리자 모니터링 (STM32)
- UART를 통해 아두이노로부터 수집된 상태 표시  
- 임계치 초과 시 경고 LED 점등  
- 향후 라즈베리파이 대시보드와 연동  

### 3️⃣ 서버 저장 (Raspberry Pi)
- Wi-Fi로 수신된 데이터 DB 저장  
- Flask 기반 실시간 대시보드 제공  

---

## 🧷 핀맵 요약

| Arduino 핀 | 기능 | 연결 |
|-------------|------|------|
| A0 | ADC | 사운드 센서 AO |
| A1 | ADC | MQ-2 가스 센서 AO |
| D2 | Digital | 진동 센서 DO |
| D3 | Digital | 불꽃 센서 DO |
| A4(SDA), A5(SCL) | I2C | LCD |
| D8 | 출력 | 부저 |
| D9 | PWM | EZ 팬 |
| D10/D11 | UART | HC-06 |
| D2/D3 | UART | ESP8266 |

| STM32 핀 | 기능 | 연결 |
|-----------|------|------|
| PA2 | UART TX | Arduino RX |
| PA3 | UART RX | Arduino TX |
| PB5 | GPIO | 경고 LED |

---

## 📈 작동 예시 시나리오

| 상황 | 반응 | 결과 |
|------|------|------|
| 옆방 전화 소리 | 사운드 센서 P2P > 700 | LCD 경고 / 부저 ON / BT 메시지 송신 |
| 가스 누출 | MQ-2 > 2000 | 팬 ON / Wi-Fi 업로드 “gas_alert” |
| 불꽃 감지 | Flame DO = HIGH | LCD 경고 + 부저 ON |
| 진동 감지 | SW-420 = HIGH | DB 기록 및 경고 표시 |

---

## 🧩 프로젝트 폴더 구조

```
/arduino/
 ├─ mini_project.ino
/stm32-fw/
 ├─ Core/Src/main.c
 ├─ Core/Src/my_lcd.c
 ├─ Core/Inc/my_lcd.h
/docs/
 └─ 발표자료_쉿!.pptx
```

---

## 📈 향후 개선 방향

- 센서 데이터 필터링(이동 평균/RMS)  
- 시간대별 임계치 자동 조정  
- Raspberry Pi 대시보드 개선  
- 다중 방(멀티 노드) 관리 기능  
- 관리자 앱 푸시 알림 연동  
